## Racial Bias in pypi issue handling

### Context: the pypi support tracker, a gatekeeping conduit of power

This repository contains an analysis of waiting times for issue resolution
on the pypi support repository.

pypi is the main distribution pathway of python packages.
Given current market shares,
it is a de-facto monopolist gatekeeper of access and ownership related to python packages.

Concerning access and ownership, the issue tracker of the pypi support repository
is one of the - perhaps the single - most important
repository, as it a key entry point through which support requests related to
access and ownership of python packages (on pypi) are handled,
including transfer of ownership.

[Link to pypi support repo issue tracker](https://github.com/pypi/support/issues)

### Does pypi support discriminate by ethnicity or country of origin?

The process by which the issues are handled by pypi staff seems highly obscure.

As in any setting where procedural obscurity is paired with a high impact
decision making powers, it is critical to check whether discrimination by sensitive
background characteristics such as ethnicity or country of origin occurs.

For instance, an ingroup could discriminate against outgroups:

* by ensuring that ownership of important types of packages (e.g., AI themed) remains preferably in the hands of the ingroup
* by taking actions that transfer, or facilitate transfer of ownership of packages from an outgroup to an ingroup
* by taking actions that directly hurt packages owned by an outgroup
* by delaying, or stalling reasonable or supportive actions for packages owned by an outgroup

While it is hard to fully answer the question of intention or causality,
it may be possible to detect biases that may be considered indicative for
more fundamental discriminative patterns.

For this, we use:

* PEP 541 requests, package name support requests, which are the main type of
  issues related to ownership and ownership transfer of packages,
  as the main observable. We argue this is a natural scope, as it is here where
  the interaction of power and control around python packages culminates.
* waiting time on package name support issues until closed,
  as an imperfect proxy end point for quality of outcome and quality of service.
  We call this imperfect proxy, below, "issue waiting time".
* automatic then human validated categorization
  of public name information of the issue opener,
  to one of nine coarse and imperfect categories, as an imperfect proxy
  correlating with country of origin and likely self-reported ethnicity.
  We call this imperfect proxy, below, "region of name origin"

We ask the question: does the region of origin, of the issue opener,
correlate with issue waiting time? If yes, how?

### Note: Recent improvements to pypi support tracker staffing

Recently, the Python Software Foundation has hired a support specialist to
handle the large backlog of pypi issues.

While a step in the right direction, this is a measure which does not by itself
address potential problems with the pypi support issue tracker.

Fixing a problem generally requires resources dedicated to the problem,
as well as empowerment to handle the problem, vested in persons tasked with handling
the problem, besides of course the intention to tackle the problem in the first place.

Clearly, some of the above require upper management decision and commitment.

### AI inferred and validated region of name origin - proxy for ethnicity

The categories for region of origin are defined to be well-delineable
by an AI language model.

While imperfect, we argue that they represent imperfectly but reasonably well
a likely mixed second-hand perception of ethnicity and country of origin,
which is the relevant property for potential discrimination: this is because issue
handlers and respondents have access to this information only,
rather than, for instance, a more accurate (but inaccessible) self-reported ethnicity.

The categories for region of name origin used,
with synthetic examples (male and female) generated by a popular AI language model, are:

* English - e.g., William Smith, Olivia Brown
* Hispanic - e.g., Javier Morales, Camila Reyes
* Muslim Majority Country - e.g., Tariq Khan, Yasmin Karim
* North European - e.g., Erik Johansen, Sanna Virtanen
* West European - e.g., Pierre Dubois, Laura Schmid
* East European - e.g., Pavlo Melnyk, Dragana Petrovic
* East Asian - e.g., Chen Wei, Yuki Tanaka
* South Asian - e.g., Arjun Singh, Rani Das
* Sub-Saharan African - e.g., Babajide Adeyemi, Mekdes Alemayehu

The categories themselves were also suggested, up to minor modifications,
by a popular AI language model.

In the analysis, for each GitHub account, the region of origin is inferred
by an AI model and human validated (confirmed or possibly changed)
for each and every entry.

To avoid data protection issues - this would be collation/scraping and fall under
respective regulations if published - the final assignment of GitHub accounts to
the categories is not published, nor is code published to obtain the initial AI
generated assignment.

### Results

The following table shows seven-number summaries of waiting times, in days,
for PEP 541 issues still open on the pypi issue support tracker
at a scraping date in August 2024, tabulated by eight of the
nine regions of name origin, and ordered by the median waiting time.

Columns are, from left to right: median, 1st quartile, 3rd quartile,
maximum, mean, and standard deviation (of waiting times), and total sample count.

The Sub-Saharan African category is not shown due to low sample size (2) that makes
interpretation difficult, but would be the last column if it were shown.

```
                 50%    25%    75%    max   mean    std  count
North European 180.0  123.0  260.0  410.0  190.0  111.0   12.0
Hispanic       186.0   72.0  315.0  501.0  207.0  142.0   25.0
English        215.0  136.0  378.0  508.0  249.0  144.0   69.0
West European  254.0  121.0  386.0  497.0  255.0  148.0   77.0
Muslim MC      262.0  165.0  455.0  506.0  286.0  166.0   16.0
East Asian     318.0  161.0  390.0  476.0  281.0  135.0   23.0
South Asian    333.0  262.0  420.0  529.0  339.0  117.0   19.0
East European  338.0  190.0  402.0  533.0  288.0  157.0   22.0
```

The Kruskal-Wallis test on the full sample (eight categories, open issues) produces an
evidence value of p=0.06, applied to the null hypothesis
of equal waiting time distributions across categories.

That is, the test states that: only in 6 out of 100 cases one finds this (or a higher)
level of differences between the groups (differences as measured by the test statistic),
if there were no actual difference (for samples of same counts, drawn from the joint
marginal distribution).

The code used to generate the table is in `simple_bias_analysis.py`,
preceded by `scrape_issue_data.py` to scrape the issue data,
and AI assisted annotation by region of origin (annotated data not provided
for data protection reasons).

For comparison, we show a table with counts of the 10 maintainers listed publicly
on the `pypi` organisation's people tab, with inferred
regions of name origin, and rows in the same order as the table above:

```
               count
North European     1
Hispanic           2
English            5
West European      1
Muslim MC          0
East Asian         0
South Asian        0
East European      1
```

### Discussion

While the results can be considered worrying,
we would caution that they do not directly imply, or prove:

* causation, or ill intent
* causal attribution to pypi maintenance staff as a group, or to specific individuals

A weakness of the analysis is the coarseness of the categories.
For instance, individuals from severely discriminated communities such as African
Americans may end up in the same category as (self-reported) White Americans, the
"English" category, given the historical propagation of the Anglo-Saxon naming schema.

Finally, it should be noted that it is primarily the obscurity of the pypi support
process which prevents a more direct analysis. More direct scrutiny would require
a commitment to robust monitoring and a transparent process, by owners of the pypi
support mechanisms. One could argue that this would be in the interest of
the wider python community, which is international at its core.
